#define __AVR_ATmega2560__

#include <avr/io.h>
#include <avr/common.h>
#include <avr/interrupt.h>

#define F_CPU 16000000UL

int main()
{
  // запускаем АЦП
  // По дефолту выравнивание ADCW идёт справа
  ADCSRA = 1 << ADEN;

  // тактовую частоту микроконтроллера делим на 128, частота АЦП 125 Кгц
  ADCSRA |= (1 << ADPS2) | (1 << ADPS1) | (1 << ADPS0);

  // Установили опорное напряжение
  ADMUX = 1 << REFS0;

  Serial.begin(115200);

  while (true)
  {
    // помним о том что MUX5 нужно записывать в ADCSRA, а все остальные в ADMUX
    // записываем 1 в бит для выбора аналогового порта ADC1
    ADMUX |= 1 << MUX0;

    // записываем 1 в бит для запуска преобразования
    ADCSRA |= (1 << ADSC);

    while (ADCSRA & (1 << ADSC))
    {
    }

    // альтернативный вариант написания, но он медленнее Serial.println(ADCL | (ADCH << 8));
    Serial.print("ADC1: ");
    Serial.println(ADCW);

    // записываем 0 в бит для выбора аналогового порта ADC0
    ADMUX &= ~(1 << MUX0);

    // записываем 1 в бит для запуска преобразования
    ADCSRA |= (1 << ADSC);

    while (ADCSRA & (1 << ADSC))
    {
    }

    Serial.print("ADC0: ");
    Serial.println(ADCW);
  }
}
